<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('./partials/head') %>
  </head>
  <body>
    <%- include('./partials/appHeader') %>
    <main>
      <a href="/blogs/new" class="blogs--owner">Add Blog</a>
      <section class="blogs">
        <table>
          <tr>
            <th>Title</th>
            <th>Description</th>
            <th>Tags</th>
            <th>Status</th>
            <th>Date</th>
            <th>Actions</th>
          </tr>
          <% if(blogs.length === 0) { %>
          <tr>
            <td colspan="5">No blogs found</td>
          </tr>
          <% } %> <% for (let blog of blogs) { %>
          <tr>
            <td><a href="#"><%= blog.title %></a></td>
            <td><a href="#"><%= blog.description %></a></td>
            <td>
              <% for (let tag of blog.tags) { %>
              <a href="#"><%= tag %></a>
              <% } %>
            </td>
            <td><a href="#"><%= blog.state %></a></td>
            <td>
              <a href="#"><%= blog.created_at.toISOString().split('T')[0] %></a>
            </td>
            <td style="display: flex; gap: 2rem">
              <% if (blog.state === 'draft') { %>
              <form method="post" action="/blogs/<%= blog._id %>/status">
                <button class="delete-btn">
                  <i class="fa-solid fa-paper-plane"></i>
                </button>
              </form>
              <% } %>
              <a href="/user/blogs/<%= blog._id %>">
                <i class="fa-solid fa-edit"></i>
              </a>
              <form method="post" action="/user/blogs/<%= blog._id %>/delete">
                <button class="delete-btn">
                  <span style="color: tomato">
                    <i class="fa-solid fa-trash"></i>
                  </span>
                </button>
              </form>
            </td>
          </tr>
          <% } %>
        </table>
        <div class="page-btns">
          <button>
            <h3>PREV</h3>
          </button>
          <button>
            <h3>NEXT</h3>
          </button>
        </div>
      </section>
    </main>
  </body>
</html>
